<!DOCTYPE html>
<html>

<head>
  <title>Kurzus kezelő</title>
  <link rel="stylesheet" href="frontend.css?v=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap">
  <meta charset="UTF-8">

  <script src="login.js"></script>
  <script src="shared.js"></script>
  <script src="teacher.js"></script>

</head>

<body style="background-color:lightgray;;">
  <div class="container">
    <div class="center"><p id="koszonto">Üdvözöljük a tanári felületen!</p></div>
    <div class="topright"><button class="funkcioGomb" onclick="kijelentkezes()">Kijelentkezés</button></div>
  </div>
  <div style="height: 100%;">
    <div id="tablazat">
      <div class="mainPage">

        <Table id="tablazat1">
          <tr>
            <td style="text-align: left; width: 30%; background-color: rgb(230, 230, 230);">
                <div id="gombok">
                    <h1 id="mainCim"
                        style="font-size: 60px; margin-top: 0; margin-left: 0;font-family:'Press Start 2P', cursive;color: orange;">
                        Kurzus kezelő
                    </h1>
                    <div><p id="felhasznalo_neve"><span id = "felhasznalonev"></span></p></div>
                    <script>
                      var nev = getCurrentUserName();
                      document.getElementById("felhasznalonev").textContent=nev;
                     </script> <!--Ide kell rakni a scriptet, hogy ne null-nak tekintse a "felhasznalonev"-t-->
                    <div class="row"><select class="funkcioGomb" id="departmentList"></select></div>
                    <div class="row">
                        <button class="funkcioGomb" type="button" onclick="sajatlista()">
                            Saját kurzusok
                            listázása
                        </button>
                    </div>
                    <div class="row"><button class="funkcioGomb" type="button" onclick="kurzusLetrehozas()">Új kurzus létrehozása</button></div>
                    <div class="row"><button class="funkcioGomb" type="button" onclick="esemenyLetrehozas()">Esemény létrehozása / törlése</button></div>
                    <div class="row"><img id="kathi" src="reklam2.png" alt="Kathi Béla"></div>













                    <input type="text" id="usernameInput" placeholder="Your username...">
                    <input type="text" id="messageInput" placeholder="Type a message...">
                    <button type="button" onclick="sendMessage(event)">Send</button>
                    <div id="output" style="height: 300px; overflow-y: scroll;">
                        <p>Sikeresen csatlakozott a chat-hez!</p>
                    </div>


                    <script>
                        const socket = new WebSocket('ws://localhost:8000');
                        socket.onopen = function (event) {
                            console.log('WebSocket connection opened.');
                        };

                        socket.onmessage = function (event) {
                            const output = document.getElementById('output');
                            const newMessage = document.createElement('p');
                            newMessage.textContent = event.data;
                            output.appendChild(newMessage);
                            output.scrollTop = output.scrollHeight;
                        };

                        socket.onerror = function (error) {
                            console.error('WebSocket error:', error);
                        };

                        socket.onclose = function (event) {
                            console.log('WebSocket connection closed:', event);
                            socket.removeEventListener('message', onMessage);
                            socket.removeEventListener('error', onError);
                        };

                        function sendMessage(event) {
                            event.preventDefault();
                            const usernameInput = document.getElementById('usernameInput');
                            const messageInput = document.getElementById('messageInput');
                            const username = usernameInput.value;
                            const message = messageInput.value;
                            if (username && message) {
                                socket.send(username + ': ' + message);
                                messageInput.value = '';
                            } else {
                                alert('Please enter both username and message.');
                            }
                        }
                    </script>












                    <!-- <div class="row"><select class="funkcioGomb" id="studentList"></select></div> -->
                </div>
            </td>
            <td>
              <div id="dataDisplay" class="dataDisplay"></div>
            </td>
          </tr>
        </Table>

        <script>
          fetchDataTanszek();
         // fetchDataResztvevoListazas();
        </script>

      </div>
    </div>
</body>

</html>